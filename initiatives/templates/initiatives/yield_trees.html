{% extends "initiatives/base.html" %} {% load static %} {% block headcontent %}

<script
  type="text/javascript"
  src="https://www.gstatic.com/charts/loader.js"
></script>
<script type="text/javascript">
  google.charts.load('current', {packages:["orgchart"]});
  google.charts.setOnLoadCallback(draw_yield_tree);

  function json_2_col1st_arrays(jsonString){
      // google.visualization.arrayToDataTable expect 1st array to be column names then data so do that here
      let array  = JSON.parse(jsonString);
      array2 = [array.columns].concat(array.data)
      return array2
  }

  function draw_yield_tree(jsonString="{{ json_yield_tree|escapejs }}"){
      let array  = JSON.parse(jsonString);
      var data_yield_tree = google.visualization.arrayToDataTable(array.data);

      var options_yt = {
        title: 'Yield Tree',
        curveType: 'function',
        legend: { position: "none" },
          chartArea: {width: '100%'},
      };

      var orgChart = new google.visualization.OrgChart(document.getElementById('yield_tree_plot'));
      orgChart.draw(data_yield_tree, options_yt);

    }
</script>
{% endblock headcontent %} {% block content %}

<div id="yield_tree_plot"></div>

{% endblock content %}
